# 6. 다양한 연관관계 매핑
  > 엔티티의 연관관계를 매핑할 때는 3가지를 고려해야함
  > 1. 다중성
  > 2. 단방향, 양방향
  > 3. 연관관계의 주인

<br>

### 1. 다중성
- 다대일(`@ManyToOne`)
- 일대다(`@OneToMany`)
- 일대일(`@OneToOne`)
- 다대다(`@ManyToMany`)

> 다중성을 판단하기 어렵다면? => **반대방향** 을 생각해보자! <br>
> 일대다 <-> 다대일 <br>
> 일대일 <-> 일대일 <br>
보통 다대일, 일대다 관계를 많이 사용함

<br>

### 2. 단방향, 양방향
`테이블`은 외래 키 하나로 **조인**을 사용해서 양방향으로 쿼리가 가능 => 방향이라는 개념 X <br>
`객체`는 **참조용 필드**를 가지고 있는 객체만 연관된 객체를 조회할 수 있음 <br>
> `단방향 관계` : 객체 관계에서 한 쪽만 참조하는 것 <br>
> `양방향 관계` : 양쪽이 서로 참조하는 것

<br>

### 3. 연관관계의 주인
> 두 객체 연관관계 중 하나를 정해서 데이터베이스 외래 키를 관리하는 것 <br>

`테이블`은 **외래 키** 하나로 연관관계를 관리한다 -> 관리하는 포인트 1개 <br>
`엔티티`는 A -> B, B -> A **서로** 를 참조한다 -> 관리하는 포인트 2개 <br>
- 외래 키를 가진 테이블과 매핑한 엔티티로 보통 연관관계의 주인으로 선택함
- 주인이 아닌 방향은 외래 키 변경 X, 조회만 OK
- 연관관계의 주인은 mappedBy 속성 사용 X
  - 주인이 아님 : mappedBy 속성을 사용해 연관관계의 주인 필드 이름을 값으로 입력해야함


<br>

#### 다중성과 단방향, 양방향을 고려한 가능한 모든 연관관계 <br>

- 다대일 : 단방향, 양방향
- 일대다 : 단방향, 양방향
- 일대일 : 주 테이블 단방향, 양방향
- 일대일 : 대상 테이블 단방향, 양방향
- 다대다 : 단방향, 양방향


## 6-1. 다대일
- 다대일 <-> 일대다
- 객체 양방향 관계에서 연관관계의 주인은 항상 `다`쪽
   - 회원(N) : 팀(1) => 회원 쪽이 연관관계의 주인

### 6-1-1. 다대일 단방향[N:1]


